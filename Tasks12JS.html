<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Tasks-Day 12</title>
<style>
     table {
      border-collapse: collapse;
      width: 80%;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #f4f4f4;
    }

    body {
    font-family: sans-serif;
    background-color: #f4f4f4;
    margin: 0;
    padding: 20px;
}

.gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 10px;
}

.gallery img {
    width: 100%;
    height: 150px; /* Uniform height for all images */
    object-fit: cover; /* Ensures images cover the area without stretching */
    border-radius: 5px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    transition: transform 0.2s;
}

.gallery img:hover {
    transform: scale(1.05);
}
.spinner {
      border: 6px solid #f3f3f3;
      border-top: 6px solid #3498db;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
      display: none; /* hidden by default */
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    #output {
      margin-top: 20px;
    }


    .pagination-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
.card-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
}

.weather-card {
    background: #f4f4f9;
    border-radius: 12px;
    padding: 20px;
    width: 200px;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.weather-card img {
    width: 80px;
}

.temp {
    font-size: 2rem;
    font-weight: bold;
}
</style>
</head>
<body>
<h1>1.Convert a JavaScript object to a JSON string using JSON.stringify().  </h1>
<script>
const user = {
  name: 'John Doe',
  age: 30,
  city: 'New York'
};
const jsonString = JSON.stringify(user);
console.log(jsonString);
document.write("The Converted String is ",jsonString);
</script>
<br><hr><br>
<h1>2.Convert a JSON string back to a JavaScript object using JSON.parse().</h1>
<script>
const jsonStrings = '{"name": "Alice", "age": 30, "city": "New York"}';
const jsObject = JSON.parse(jsonStrings);
console.log(jsObject.name); 
console.log(jsObject.age);
document.write("Name: ",jsObject.name); 
document.write("<br>Age:" ,jsObject.age);
</script>
<br><hr><br>
<h1>3.Create a JSON file (data.json) and fetch it using JavaScript.</h1>
<pre id="output"></pre>
<script>
    fetch('./data.json')
  .then(response => response.json())
  .then(data => {
    document.getElementById('output').textContent = JSON.stringify(data, null, 2);
  });
 </script>
 <br><hr><br>
 <h1>4.Store an array of objects in LocalStorage as JSON and retrieve it. </h1>
 <script>
    const profiles = [
    { id: 1, name: 'Shree', active: true },
    { id: 2, name: 'Rekha', active: false },
    { id: 3, name: 'Shanthi', active: true }
]
const profilesJSON = JSON.stringify(profiles);
localStorage.setItem('userProfiles', profilesJSON);

console.log('Data stored in localStorage:', profilesJSON);
document.write('Data stored in localStorage:', profilesJSON);
 </script>
 <br><hr><br>
 <h1>5.Fetch JSON data from an API and display it in a table. </h1>
 <table border="1">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
        </tr>
    </thead>
    <tbody id="data-table-body"></tbody>
</table>
 <script>
 async function loadTableData() {
    const url = 'https://jsonplaceholder.typicode.com/users';

    try {
        
        const response = await fetch(url);
        if (!response.ok) throw new Error("Network response was not ok");
        const data = await response.json();
        const tableBody = document.getElementById('data-table-body');
        let rowsHtml = '';
        data.forEach(user => {
            rowsHtml += `
                <tr>
                    <td>${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                </tr>
            `;
        });
        tableBody.innerHTML = rowsHtml;

    } catch (error) {
        console.error("Error fetching data:", error);
    }
}
loadTableData();
 </script>
 <br><hr><br>
 <h1>6.Modify a JSON object inside an array and update it. </h1>
 <script>
const users = [
    { "id": 1, "name": "Rekha", "active": false },
    { "id": 2, "name": "Priya", "active": true },
    { "id": 3, "name": "Sathya", "active": false }
];
const userToUpdate = users.find(user => user.id === 2);
if (userToUpdate) {
    userToUpdate.name = "Reeta"; 
    userToUpdate.active = false;  
}
console.log(users);
document.write(JSON.stringify(users));
 </script>
 <br><hr><br>
 <h1>7.Filter JSON data to display only objects matching a specific condition. </h1>
 <script>
const products = [
    { id: 1, name: 'Laptop', category: 'Electronics', price: 999 },
    { id: 2, name: 'T-shirt', category: 'Apparel', price: 25 },
    { id: 3, name: 'Smartphone', category: 'Electronics', price: 699 },
    { id: 4, name: 'Jeans', category: 'Apparel', price: 50 },
    { id: 5, name: 'Monitor', category: 'Electronics', price: 250 }
];

const electronicProducts = products.filter(product => {
    return product.category === 'Electronics';
});
console.log(electronicProducts);
document.write(JSON.stringify(electronicProducts));
 </script>
 <br><hr><br>
 <h1>8.Sort an array of objects stored in JSON by a specific property (e.g., price, age).</h1>
 <script>
const jsonString1 = `[
    { "name": "Apple", "price": 1.50, "quantity": 10 },
    { "name": "Banana", "price": 0.50, "quantity": 25 },
    { "name": "Orange", "price": 1.00, "quantity": 15 },
    { "name": "Mango", "price": 2.00, "quantity": 5 }
]`;

let product = JSON.parse(jsonString1);
function sortArrayByProperty(arr, property) {
    return arr.sort((a, b) => {
        if (typeof a[property] === 'number' && typeof b[property] === 'number') {
            
            return a[property] - b[property];
        }

                if (typeof a[property] === 'string' && typeof b[property] === 'string') {
            return a[property].localeCompare(b[property]);
        }


        return 0;
    });
}

console.log("Original array:", products);
document.write("Original array:", JSON.stringify(products));

const sortedByPrice = sortArrayByProperty(products, 'price');
console.log("\nSorted by price:", sortedByPrice);
document.write("<br>Sorted by price:", JSON.stringify(sortedByPrice));
 </script>
 <br><hr><br>
 <h1>9.Find an object inside a JSON array based on a property value.  </h1>
 <script>
const employees = [
  { id: 1, name: 'Anandhi', department: 'HR' },
  { id: 2, name: 'Bharathi', department: 'Engineering' },
  { id: 3, name: 'Deepak', department: 'HR' },
  { id: 4, name: 'David', department: 'Sales' }
];

const targetDepartment = 'HR';
const hrEmployees = employees.filter(employee => employee.department === targetDepartment);

console.log(hrEmployees);
document.write(JSON.stringify(hrEmployees));
 </script>
 <br><hr><br>
 <h1>10.Create a function that adds new objects to an existing JSON file.  </h1>
 <pre id="output1"></pre>
 <script>  
 fetch('./data.json')
  .then(response => response.json())
  .then(data => {
    document.getElementById('output1').textContent = JSON.stringify(data, null, 2);
  });

const fs=require('fs').promises;
async function addObjectToJson(filePath, newObject) {
    try {
        const data = await fs.readFile(filePath, 'utf8');
        
        const json = JSON.parse(data);
        if (Array.isArray(json)) {
            json.push(newObject);
        } else {
            json[`item_${Date.now()}`] = newObject;
        }
        await fs.writeFile(filePath, JSON.stringify(json, null, 2));
        
        console.log('Successfully updated the JSON file.');
    } catch (err) {
        console.error('Error processing the file:', err);
    }
}
const newItem = { "Marks":[100,98,99]};
addObjectToJson('./data.json', newItem);
 
 </script>
 <br><hr><br>
 <h1>11.Remove a specific object from an array inside a JSON file</h1>
 <script>
  const products1 = [
    { id: 1, name: 'Laptop', category: 'Electronics', price: 999 },
    { id: 2, name: 'T-shirt', category: 'Apparel', price: 25 },
    { id: 3, name: 'Smartphone', category: 'Electronics', price: 699 },
    { id: 4, name: 'Jeans', category: 'Apparel', price: 50 },
    { id: 5, name: 'Monitor', category: 'Electronics', price: 250 }
];

const electronicProducts1 = products1.filter(product => {
    return product.category === 'Electronics';
});
console.log(electronicProducts1);
document.write(JSON.stringify(electronicProducts1));
 </script>
 <br><hr><br>

 <h1>12.Fetch data from a JSON file and display it in a dropdown list. </h1>
 <h2>Select an Option</h2>
    <select id="data-dropdown">
        <option value="">-- Select --</option>
    </select>
<script>
async function populateDropdown() {
    const dropdown = document.getElementById('data-dropdown');

    try {
        
        const response = await fetch('data.json');
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        data.forEach(item => {
            const option = document.createElement('option');
            option.value = item.id; 
            option.textContent = item.name; 
            dropdown.appendChild(option); 
        });

    } catch (error) {
        console.error('Error fetching data:', error);
        dropdown.innerHTML = '<option value="">Error loading data</option>';
    }
}

populateDropdown();

</script>
<br><hr><br>
<h1>13.Fetch data from an API using fetch() and handle errors gracefully using .catch().</h1>

<script>
async function getData() {
  try {
    const response = await fetch('https://jsonplaceholder.typicode.com/users');
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const data = await response.json();
    console.log(data);
  } catch (error) {
    console.error('Graceful error handling:', error);
    document.write('Graceful error handling:', error);
  }
}

getData();
</script>
<br><hr><br>
<h1>14.Convert a nested JavaScript object into a JSON string using JSON.stringify().</h1>
<script>

const nestedObject = {
  name: "John Doe",
  age: 30,
  isStudent: false,
  address: {
    street: "123 Main St",
    city: "Anytown",
    zipCode: "12345"
  },
  courses: ["JavaScript", "HTML", "CSS"]
};
const jsonsString = JSON.stringify(nestedObject);

console.log(jsonsString);
document.write(jsonsString);

</script>
<br><hr><br>
<h1>15.Parse a JSON string that contains an array of objects and log each object.</h1>
<script>
    
const json1String = '[{"id": 1, "name": "Apple"}, {"id": 2, "name": "Banana"}, {"id": 3, "name": "Cherry"}]';

try {
    const dataArray = JSON.parse(json1String);

    console.log("Parsing successful. Logging each object:");
    for (const item of dataArray) {
        console.log(item);
        document.write(JSON.stringify(item));
    }

} catch (error) {
    console.error("Error parsing JSON:", error);
}

</script>
<br><hr><br>
<h1>16.Fetch a list of users from an API and display only those with a specific role.</h1>
<div id="app">
        Loading...
    </div>
<script>

async function fetchAndDisplayUsersByRole(role) {
    
    const apiEndpoint = 'jsonplaceholder.typicode.com'; 

    try {
        
        const response = await fetch(apiEndpoint);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const usersData = await response.json();

        
        const usersWithRoles = usersData.map((user, index) => {
            
            return {
                ...user,
                role: index % 2 === 0 ? 'user' : 'admin'
            };
        })
        const filteredUsers1 = usersWithRoles.filter(user => user.role === role);

        
        console.log(`Users with role: ${role}`);
        console.log(filteredUsers1);
        displayUsersInBrowsers(filteredUsers1, role);

    } catch (error) {
        
        console.error('Could not fetch or process users:', error);
    }
}

function displayUsersInBrowser(users, role) {
    const appElement = document.getElementById('app');
    if (!appElement) return;

    appElement.innerHTML = `<h2>Users with the role '${role}'</h2>`;
    const ul = document.createElement('ul');
    users.forEach(user => {
        const li = document.createElement('li');
        li.textContent = `${user.name} (Username: ${user.username}, Role: ${user.role})`;
        ul.appendChild(li);
    });
    appElement.appendChild(ul);
}
fetchAndDisplayUsersByRole('admin');

</script>
<br><hr><br>
<h1>
17.Store a JSON object in LocalStorage and retrieve it after page refresh.
</h1>
<script>
    const user1 = {
    name: 'Jane Doe',
    age: 30,
    city: 'San Francisco'
};
localStorage.setItem('userData', JSON.stringify(user1));

console.log('Object stored in localStorage:', user1);
document.write('Object stored in localStorage:', JSON.stringify(user1));
const storedUserString = localStorage.getItem('userData');


const retrievedUser = JSON.parse(storedUserString);

console.log('Object retrieved after page refresh:', retrievedUser);
document.write('Object retrieved after page refresh:', JSON.stringify(retrievedUser));


if (retrievedUser) {
    console.log('User Name:', retrievedUser.name);
    console.log('User Age:', retrievedUser.age);
    document.write('User Name:', retrievedUser.name);
    document.write('User Age:', retrievedUser.age);
}
</script>
<br><hr><br>
<h1>18.Use fetch() with async/await to retrieve data from a public API and display it.</h1>
<p id="data-output">Loading...</p>
<script>
    
    const outputElement = document.getElementById('data-output');

        
        async function fetchApiData() {
            try {
    
                const responses = await fetch('jsonplaceholder.typicode.com');

                
                if (!responses.ok) {
                    throw new Error(`HTTP error! status: ${responses.status}`);
                }
                const data = await responses.json();
                outputElement.textContent = data.title;

            } catch (error) {
                
                console.error("Could not fetch data:", error);
                outputElement.textContent = 'Error loading data.';
            }
        }
        fetchApiData();
</script>
<br><hr><br>
<h1>19.Fetch weather data for multiple cities and display them in separate cards.</h1>
<div id="weather-container" class="card-grid">Loading..</div>
<script>
const apiKey = 'YOUR_API_KEY'; // Replace with your actual key
const cities = ['London', 'New York', 'Tokyo', 'Paris'];
const container = document.getElementById('weather-container');

async function fetchWeather() {
    container.innerHTML = '';

    for (const city of cities) {
        try {
            const response = await fetch(
                `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${apiKey}`
            );
            
            if (!response.ok) throw new Error(`City ${city} not found`);
            
            const data = await response.json();
            createWeatherCard(data);
        } catch (error) {
            console.error(error.message);
        }
    }
}

function createWeatherCard(data) {
    const card = document.createElement('div');
    card.className = 'weather-card';
    
    // Extract data fields
    const { name, main, weather } = data;
    const iconUrl = `https://openweathermap.org/img/wn/${weather[0].icon}@2x.png`;

    card.innerHTML = `
        <h3>${name}</h3>
        <img src="${iconUrl}" alt="${weather[0].description}">
        <p class="temp">${Math.round(main.temp)}°C</p>
        <p class="desc">${weather[0].description}</p>
        <p>Humidity: ${main.humidity}%</p>
    `;
    
    container.appendChild(card);
}

fetchWeather();

</script>
<br><hr><br>
<h1>20.Implement pagination (next/prev) while fetching large JSON datasets.</h1>
<h1>Paginated Data</h1>
    <div id="data-container">
    </div>
    <div class="pagination">
        <button id="prev-button" class="pagination-button">Previous</button>
        <span id="page-info">Page 1 of X</span>
        <button id="next-button" class="pagination-button">Next</button>
    </div>
<script>
const dataContainer = document.getElementById('data-container');
const prevButton = document.getElementById('prev-button');
const nextButton = document.getElementById('next-button');
const pageInfo = document.getElementById('page-info');

let currentPage = 1;
const itemsPerPage = 10; // Number of items to show per page
let jsonData = []; // Will hold the full JSON dataset

// Function to fetch the data
async function fetchData() {
    try {
        // Replace with your actual JSON endpoint or local file path
        const response = await fetch('jsonplaceholder.typicode.com'); 
        jsonData = await response.json();
        // Initialize the pagination once data is fetched
        displayPage(currentPage);
        updatePaginationControls();
    } catch (error) {
        console.error('Error fetching data:', error);
    }
}

// Function to display items for the current page
function displayPage(page) {
    dataContainer.innerHTML = ''; // Clear previous items

    const startIndex = (page - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    // Slice the data array to get items for the current page
    const itemsOnPage = jsonData.slice(startIndex, endIndex);

    itemsOnPage.forEach(item => {
        const itemElement = document.createElement('div');
        itemElement.classList.add('data-item');
        itemElement.innerHTML = `
            <h3>${item.title}</h3>
            <p>${item.body.substring(0, 100)}...</p>
        `;
        dataContainer.appendChild(itemElement);
    });
}

// Function to update button states and page info
function updatePaginationControls() {
    const totalPages = Math.ceil(jsonData.length / itemsPerPage);
    pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;

    // Disable previous button if on the first page
    prevButton.disabled = (currentPage === 1);
    // Disable next button if on the last page
    nextButton.disabled = (currentPage === totalPages);
}

// Event listeners for the buttons
prevButton.addEventListener('click', () => {
    if (currentPage > 1) {
        currentPage--;
        displayPage(currentPage);
        updatePaginationControls();
    }
});

nextButton.addEventListener('click', () => {
    const totalPages = Math.ceil(jsonData.length / itemsPerPage);
    if (currentPage < totalPages) {
        currentPage++;
        displayPage(currentPage);
        updatePaginationControls();
    }
});

// Initial data fetch and display
fetchData();
</script>
<br><hr><br>
<h1>21.Fetch a random joke from an API and show it on the page.  </h1>
<div id="joke-container">
  <p id="setup">Click the button to get a joke!</p>
  <p id="punchline" style="font-weight: bold;"></p>
</div>
<button id="jokeButton">Get Random Joke</button>
<script>
    const setupElement = document.getElementById('setup');
const punchlineElement = document.getElementById('punchline');
const button = document.getElementById('jokeButton');

async function getJoke() {
  try {
    
    const response = await fetch('official-joke-api.appspot.com');
    
    const data = await response.json();

    setupElement.textContent = data.setup;
    punchlineElement.textContent = `... ${data.punchline}`;
    
  } catch (error) {
    setupElement.textContent = "Oops! Could not fetch a joke.";
    console.error("Error fetching joke:", error);
  }
}
button.addEventListener('click', getJoke);
</script>
<br><hr><br>
<h1>22.Fetch posts from an API and display them in a list. </h1>
<ul id="post-list">
        <!-- Posts will be dynamically added here -->
    </ul>
    <script>
        async function fetchPosts() {
    const apiURL = 'https://jsonplaceholder.typicode.com/posts';
    const postListElement = document.getElementById('post-list');

    try {
        // Fetch data from the API
        const response = await fetch(apiURL);

        // Check if the request was successful
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        // Parse the JSON data
        const posts = await response.json();

        // Display the posts in the list
        posts.forEach(post => {
            const li = document.createElement('li');
            li.innerHTML = `
                <strong>${post.title}</strong>
                <p>${post.body}</p>
            `;
            postListElement.appendChild(li);
        });
    } catch (error) {
        console.error('Error fetching posts:', error);
        postListElement.innerHTML = '<li>Failed to load posts. Please try again later.</li>';
    }
}

// Call the fetch function when the script loads
fetchPosts();
    </script>
    <br><hr><br>
    <h1>
        23.Use Fetch API to submit a form to an API. 
    </h1>
    <form id="myForm">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" required>
        <br><br>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        <br><br>
        <button type="submit">Submit</button>
    </form>
    <p id="responseMessage"></p>
    <script>
        const myForm = document.getElementById('myForm');
        const responseMessage = document.getElementById('responseMessage');
        // Replace with your actual API endpoint
        const API_ENDPOINT = 'https://api.example.com/submit';

        // Add an event listener for the form's submit event
        myForm.addEventListener('submit', function (event) {
            // 1. Prevent the default form submission behavior
            event.preventDefault();

            // 2. Collect form data
            const formData = new FormData(myForm);
            // Convert FormData to a plain JavaScript object for JSON serialization
            const data = Object.fromEntries(formData.entries());

            // 3. Send the data using fetch API
            fetch(API_ENDPOINT, {
                // Use the POST method
                method: 'POST',
                // Specify JSON content type in headers
                headers: {
                    'Content-Type': 'application/json',
                },
                // Convert the data object to a JSON string
                body: JSON.stringify(data),
            })
            .then(response => {
                // Check if the request was successful
                if (!response.ok) {
                    throw new Error('Network response was not ok: ' + response.statusText);
                }
                return response.json(); // Parse the JSON response
            })
            .then(data => {
                // 4. Handle a successful response from the API
                console.log('Success:', data);
                responseMessage.textContent = 'Submission successful! Server response: ' + JSON.stringify(data);
                responseMessage.style.color = 'green';
                myForm.reset(); // Optionally reset the form
            })
            .catch(error => {
                // 5. Handle errors
                console.error('Error:', error);
                responseMessage.textContent = 'Submission failed. Error: ' + error.message;
                responseMessage.style.color = 'red';
            });
        })
    </script>
    <br><hr><br>
    <h1>24.Fetch real-time weather data using an API</h1>
    <script>
    async function fetchWeatherData(city) {
    // IMPORTANT: Replace 'YOUR_API_KEY' with your actual OpenWeatherMap API key
    const apiKey = 'YOUR_API_KEY';
    const url = `api.openweathermap.org{city}&appid=${apiKey}&units=metric`;

    try {
        // Use the fetch() API to make the request
        const response = await fetch(url);

        // Check if the request was successful (status code 200-299)
        if (!response.ok) {
            // Throw an error if the city is not found or another issue occurs
            throw new Error(`City not found or API error: ${response.status}`);
        }

        // Parse the JSON response body
        const data = await response.json();

        // Process and display the data (you would customize this part)
        console.log('Weather Data:', data);
        displayWeather(data);

    } catch (error) {
        // Handle any errors that occurred during the fetch operation
        console.error('Error fetching weather data:', error.message);
        alert(error.message);
    }
}

// Function to display the fetched data in the console (or update your HTML)
function displayWeather(data) {
    const cityName = data.name;
    const temperature = data.main.temp;
    const description = data.weather[0].description;
    const windSpeed = data.wind.speed;

    console.log(`\n--- Current Weather in ${cityName} ---`);
    console.log(`Temperature: ${temperature}°C`);
    console.log(`Description: ${description}`);
    console.log(`Wind Speed: ${windSpeed} m/s`);
    // In a real application, you'd update specific HTML elements here.
}

// Example Usage: Fetch weather for "London"
fetchWeatherData('London');
</script>
<br><hr><br>
<h1>25.Fetch and display GitHub user profiles</h1>
<div class="container">
        <h1>Fetch GitHub Profile</h1>
        <div class="search-container">
            <input type="text" id="usernameInput" placeholder="Enter GitHub username">
            <button onclick="fetchUserProfile()">Search</button>
        </div>
        <div id="profileContainer" class="profile-card">
            <!-- Profile details will be injected here by JavaScript -->
        </div>
    </div>
<script>
async function fetchUserProfile() {
    const username = document.getElementById('usernameInput').value;
    const profileContainer = document.getElementById('profileContainer');
    profileContainer.innerHTML = 'Fetching data...'; // Loading message

    try {
        const response = await fetch(`https://api.github.com/users/${username}`);

        if (!response.ok) {
            if (response.status === 404) {
                profileContainer.innerHTML = `<p>Error: User "${username}" not found.</p>`;
            } else {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return;
        }

        const userData = await response.json();
        displayUserProfile(userData);
        
    } catch (error) {
        console.error('Fetch error:', error);
        profileContainer.innerHTML = `<p>Error fetching data: ${error.message}</p>`;
    }
}

function displayUserProfile(user) {
    const profileContainer = document.getElementById('profileContainer');
    profileContainer.innerHTML = `
        <img src="${user.avatar_url}" alt="User Avatar" class="avatar">
        <h2>${user.name || user.login}</h2>
        <p>${user.bio || 'No bio available'}</p>
        <div class="stats">
            <span>Followers: <strong>${user.followers}</strong></span>
            <span>Following: <strong>${user.following}</strong></span>
            <span>Public Repos: <strong>${user.public_repos}</strong></span>
        </div>
        <a href="${user.html_url}" target="_blank">View Profile on GitHub</a>
    `;
}
</script>
<br><hr><br>
<h1>26.Create an image gallery using the Fetch API.</h1>
<h1>Simple Image Gallery</h1>
    <div class="gallery" id="image-gallery">
        <!-- Images will be injected here by JavaScript -->
    </div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
    const galleryElement = document.getElementById('image-gallery');
    const apiUrl = 'picsum.photos'; // Fetch 10 images

    // Function to fetch image data and build the gallery
    function fetchImages() {
        fetch(apiUrl)
            .then(response => {
                // Check if the request was successful
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json(); // Parse the JSON data
            })
            .then(images => {
                // Loop through the array of image data
                images.forEach(image => {
                    const imgElement = document.createElement('img');
                    // Use the 'download_url' provided by the Picsum API
                    imgElement.src = image.download_url;
                    imgElement.alt = `By ${image.author}`;
                    
                    galleryElement.appendChild(imgElement);
                });
            })
            .catch(error => {
                // Handle any errors during the fetch operation
                console.error('Error fetching images:', error);
                galleryElement.innerHTML = '<p>Failed to load images. Please try again later.</p>';
            });
    }

    // Call the function to fetch and display images
    fetchImages();
});

</script>
<br><hr><br>
<h1>27.Implement pagination using Fetch API.</h1>
<div id="data"></div>
  <button id="prev">Previous</button>
  <button id="next">Next</button>

  <script>
    let currentPages = 1;
    const limit = 5; // items per page
    const dataContainers = document.getElementById('data');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');

    async function fetchData(page) {
      const response = await fetch(
        `https://jsonplaceholder.typicode.com/posts?_page=${page}&_limit=${limit}`
      );
      const data = await response.json();
dataContainers.innerHTML = '';

      // Render new data
      data.forEach(item => {
        const div = document.createElement('div');
        div.textContent = `${item.id}. ${item.title}`;
        dataContainer.appendChild(div);
      });
    }

    // Event listeners for buttons
    prevBtn.addEventListener('click', () => {
      if (currentPages > 1) {
        currentPages--;
        fetchData(currentPages);
      }
    });

    nextBtn.addEventListener('click', () => {
      currentPages++;
      fetchData(currentPages);
    });
fetchData(currentPages);
</script>
<br><hr><br>
<h1>28.Use AJAX to fetch and display comments dynamically.</h1>
<h2>Comments</h2>
  <button id="loadComments">Load Comments</button>
  <div id="comments"></div>

  <script>
    document.getElementById('loadComments').addEventListener('click', function() {
      // Create XMLHttpRequest object
      const xhr = new XMLHttpRequest();

      // Configure request: GET comments from JSONPlaceholder API
      xhr.open('GET', 'https://jsonplaceholder.typicode.com/comments?_limit=5', true);

      // Handle response
      xhr.onload = function() {
        if (xhr.status === 200) {
          const comments = JSON.parse(xhr.responseText);
const commentsDiv = document.getElementById('comments');
          commentsDiv.innerHTML = '';

          // Render new comments
          comments.forEach(comment => {
            const div = document.createElement('div');
            div.innerHTML = `<strong>${comment.name}</strong> (${comment.email})<br>${comment.body}<hr>`;
            commentsDiv.appendChild(div);
          });
        } else {
          console.error('Error fetching comments');
        }
      };

      // Send request
      xhr.send();
    });
  </script>
<br><hr><br>
<h1>29.Fetch and display currency exchange rates.</h1>
<h2>Exchange Rates (USD Base)</h2>
  <div id="rates"></div>

  <script>
    async function fetchRates() {
      const response = await fetch('https://api.exchangerate.host/latest?base=USD');
      const data = await response.json();

      const ratesDiv = document.getElementById('rates');
      ratesDiv.innerHTML = '';
const currencies = ['EUR', 'GBP', 'INR', 'JPY', 'CAD'];
      currencies.forEach(curr => {
        const p = document.createElement('p');
        p.textContent = `1 USD = ${data.rates[curr]} ${curr}`;
        ratesDiv.appendChild(p);
      });
    }

    fetchRates();
  </script>
<br><hr><br>
<h1>30.Load data from an API when a button is clicked.  </h1>
<button id="loadBtn">Load Data</button>
  <div id="output2"></div>

  <script>
    document.getElementById('loadBtn').addEventListener('click', async () => {
      try {
        // Fetch data from API
        const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=5');
        const data = await response.json();

        // Clear previous output
        const outputDiv = document.getElementById('output2');
        outputDiv.innerHTML = '';

        // Display fetched data
        data.forEach(post => {
          const div = document.createElement('div');
          div.innerHTML = `<strong>${post.title}</strong><br>${post.body}<hr>`;
          outputDiv.appendChild(div);
        });
      } catch (error) {
        console.error('Error fetching data:', error);
      }
});
  </script>
  <br><hr><br>
  <h1>31.Handle API errors gracefully.  </h1>
  <button id="loadBtn">Load Data</button>
  <div id="output"></div>

  <script>
    document.getElementById('loadBtn').addEventListener('click', async () => {
      const outputDiv = document.getElementById('output');
      outputDiv.innerHTML = 'Loading...';

      try {
        // Intentionally using a wrong URL to demonstrate error handling
        const response = await fetch('https://jsonplaceholder.typicode.com/postss?_limit=5');

        // Check if response is OK (status 200–299)
        if (!response.ok) {
          throw new Error(`Server error: ${response.status} ${response.statusText}`);
        }

        const data = await response.json();

        // Clear previous output
        outputDiv.innerHTML = '';
        data.forEach(post => {
          const div = document.createElement('div');
          div.innerHTML = `<strong>${post.title}</strong><br>${post.body}<hr>`;
          outputDiv.appendChild(div);
        });
      } catch (error) {
        // Handle errors gracefully
        outputDiv.innerHTML = `<p style="color:red;">⚠️ Failed to load data: ${error.message}</p>`;
        console.error('Error details:', error);
      }
    });
  </script>
  <br><hr><br>
  <h1>32.Implement search functionality using Fetch API.</h1>
  <input type="text" id="searchInput" placeholder="Enter keyword">
  <button id="searchBtn">Search</button>
  <div id="results"></div>
  <script>
    document.getElementById('searchBtn').addEventListener('click', async () => {
      const query = document.getElementById('searchInput').value.trim();
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = 'Searching...';

      try {
        // Fetch posts from API
        const response = await fetch('https://jsonplaceholder.typicode.com/posts');
        if (!response.ok) throw new Error('Network response was not ok');

        const data = await response.json();

        // Filter results by keyword in title or body
        const filtered = data.filter(post =>
          post.title.toLowerCase().includes(query.toLowerCase()) ||
          post.body.toLowerCase().includes(query.toLowerCase())
        );
resultsDiv.innerHTML = '';

        if (filtered.length === 0) {
          resultsDiv.innerHTML = `<p style="color:red;">No results found for "${query}"</p>`;
        } else {
          filtered.forEach(post => {
            const div = document.createElement('div');
            div.innerHTML = `<strong>${post.title}</strong><br>${post.body}<hr>`;
            resultsDiv.appendChild(div);
          });
        }
      } catch (error) {
        resultsDiv.innerHTML = `<p style="color:red;">Error: ${error.message}</p>`;
      }
    });
  </script>
<br><hr><br>

<h1>33.Use Fetch API to get a list of users from an API and display in a table.</h1>
 <h2>User List</h2>
  <button id="loadBtns">Load Users</button>
  <table id="userTable">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Username</th>
        <th>Email</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <script>
    document.getElementById('loadBtns').addEventListener('click', async () => {
      try {
        // Fetch users from API
        const response = await fetch('https://jsonplaceholder.typicode.com/users');
        if (!response.ok) throw new Error('Network response was not ok');
        
        const users2 = await response.json();

        // Get table body
        const tbody = document.querySelector('#userTable tbody');
        tbody.innerHTML = ''; // Clear previous rows

        // Populate table with user data
        users.forEach(user => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${user.id}</td>
            <td>${user.name}</td>
            <td>${user.username}</td>
            <td>${user.email}</td>
          `;
          tbody.appendChild(row);
 });
      } catch (error) {
        console.error('Error fetching users:', error);
      }
    });
  </script>
  <br><hr><br>
  <h1>34.Fetch a list of countries and populate a <select> dropdown.</h1>
  h2>Select a Country</h2>
  <select id="countrySelect">
    <option value="">Loading countries...</option>
  </select>
  <script>
    async function loadCountries() {
      try {
        // Fetch list of countries
        const response = await fetch('https://restcountries.com/v3.1/all');
        if (!response.ok) throw new Error('Failed to fetch countries');

        const countries = await response.json();

        const select = document.getElementById('countrySelect');
        select.innerHTML = ''; // Clear placeholder

        // Sort countries alphabetically by name
        countries.sort((a, b) => a.name.common.localeCompare(b.name.common));

        // Populate dropdown
        countries.forEach(country => {
          const option = document.createElement('option');
          option.value = country.cca2; // ISO 2-letter code
          option.textContent = country.name.common;
          select.appendChild(option);
});
      } catch (error) {
        console.error('Error loading countries:', error);
        document.getElementById('countrySelect').innerHTML =
          '<option value="">Error loading countries</option>';
      }
    }

    
    loadCountries();
</script>
<br><hr><br>
<h1>35.Fetch data from an API and show a loading spinner while loading.</h1>
<button id="loadBtn1">Load Data</button>
  <div class="spinner" id="spinner"></div>
  <div id="output4"></div>

  <script>
    document.getElementById('loadBtn1').addEventListener('click', async () => {
      const spinner = document.getElementById('spinner');
      const outputDiv = document.getElementById('output4');

      // Show spinner
      spinner.style.display = 'block';
      outputDiv.innerHTML = '';

      try {
        // Fetch data from API
        const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=5');
        if (!response.ok) throw new Error('Network response was not ok');

        const data = await response.json();

        // Hide spinner
        spinner.style.display = 'none';
        data.forEach(post => {
          const div = document.createElement('div');
          div.innerHTML = `<strong>${post.title}</strong><br>${post.body}<hr>`;
          outputDiv.appendChild(div);
        });
      } catch (error) {
        spinner.style.display = 'none';
        outputDiv.innerHTML = `<p style="color:red;">⚠️ Error: ${error.message}</p>`;
      }
    });
  </script>


</body>
</html>